package com.puppetlabs.gatling.node_simulations
import com.puppetlabs.gatling.runner.SimulationWithScenario
import org.joda.time.LocalDateTime
import org.joda.time.format.ISODateTimeFormat
import java.util.UUID

import scala.concurrent.duration._

import io.gatling.core.Predef._
import io.gatling.http.Predef._
// import io.gatling.jdbc.Predef._

class PECouchPerfMedium extends SimulationWithScenario {

// 	val httpProtocol = http
// 		.baseURL("https://puppetserver-perf-sut54.delivery.puppetlabs.net:8140")

	val reportBody = ELFileBody("PECouchPerfMedium_0005_request.txt")

	val headers_0 = Map("X-Puppet-Version" -> "4.5.3")

	val headers_3 = Map(
		"Accept" -> "pson, dot, binary",
		"X-Puppet-Version" -> "4.5.3")

	val headers_5 = Map(
		"Accept" -> "pson",
		"Content-Type" -> "text/pson",
		"X-Puppet-Version" -> "4.5.3",
		"Connection" -> "close")
//
// val uri1 = "https://puppetserver-perf-sut54.delivery.puppetlabs.net:8140/puppet/v3"

	val scn = scenario("PECouchPerfMedium")
		.exec(http("node")
			.get("/puppet/v3/node/${node}?environment=production&transaction_uuid=7e540c32-0b79-467f-90d1-cc6330617b50&fail_on_404=true")
			.headers(headers_0))
		.pause(105 milliseconds)
		.exec(http("filemeta pluginfacts")
			.get("/puppet/v3/file_metadatas/pluginfacts?environment=production&links=follow&recurse=true&source_permissions=use&ignore=.svn&ignore=CVS&ignore=.git&checksum_type=md5")
			.headers(headers_0))
		.pause(1)
		.exec(http("filemeta plugins")
			.get("/puppet/v3/file_metadatas/plugins?environment=production&links=follow&recurse=true&source_permissions=ignore&ignore=.svn&ignore=CVS&ignore=.git&checksum_type=md5")
			.headers(headers_0))
		.pause(2)
		.exec(http("catalog")
			.post("/puppet/v3/catalog/${node}?environment=production")
			.headers(headers_3)
			.formParam("environment", "production")
			.formParam("facts_format", "pson")
			.formParam("facts", "%7B%22name%22%3A%22${node}%22%2C%22values%22%3A%7B%22aio_agent_build%22%3A%221.5.3%22%2C%22aio_agent_version%22%3A%221.5.3%22%2C%22architecture%22%3A%22x86_64%22%2C%22augeas%22%3A%7B%22version%22%3A%221.4.0%22%7D%2C%22augeasversion%22%3A%221.4.0%22%2C%22bios_release_date%22%3A%2207%2F30%2F2013%22%2C%22bios_vendor%22%3A%22Phoenix+Technologies+LTD%22%2C%22bios_version%22%3A%226.00%22%2C%22blockdevice_fd0_size%22%3A4096%2C%22blockdevice_sda_model%22%3A%22Virtual+disk%22%2C%22blockdevice_sda_size%22%3A17179869184%2C%22blockdevice_sda_vendor%22%3A%22VMware%22%2C%22blockdevice_sr0_model%22%3A%22VMware+IDE+CDR10%22%2C%22blockdevice_sr0_size%22%3A1073741312%2C%22blockdevice_sr0_vendor%22%3A%22NECVMWar%22%2C%22blockdevices%22%3A%22fd0%2Csda%2Csr0%22%2C%22boardmanufacturer%22%3A%22Intel+Corporation%22%2C%22boardproductname%22%3A%22440BX+Desktop+Reference+Platform%22%2C%22boardserialnumber%22%3A%22None%22%2C%22chassisassettag%22%3A%22No+Asset+Tag%22%2C%22chassistype%22%3A%22Other%22%2C%22choco_install_path%22%3A%22C%3A%5C%5CProgramData%5C%5Cchocolatey%22%2C%22chocolateyversion%22%3A%220%22%2C%22custom_auth_conf%22%3Afalse%2C%22dhcp_servers%22%3A%7B%22ens160%22%3A%2210.32.22.10%22%2C%22system%22%3A%2210.32.22.10%22%7D%2C%22disks%22%3A%7B%22fd0%22%3A%7B%22size%22%3A%224.00+KiB%22%2C%22size_bytes%22%3A4096%7D%2C%22sda%22%3A%7B%22model%22%3A%22Virtual+disk%22%2C%22size%22%3A%2216.00+GiB%22%2C%22size_bytes%22%3A17179869184%2C%22vendor%22%3A%22VMware%22%7D%2C%22sr0%22%3A%7B%22model%22%3A%22VMware+IDE+CDR10%22%2C%22size%22%3A%221.00+GiB%22%2C%22size_bytes%22%3A1073741312%2C%22vendor%22%3A%22NECVMWar%22%7D%7D%2C%22dmi%22%3A%7B%22bios%22%3A%7B%22release_date%22%3A%2207%2F30%2F2013%22%2C%22vendor%22%3A%22Phoenix+Technologies+LTD%22%2C%22version%22%3A%226.00%22%7D%2C%22board%22%3A%7B%22manufacturer%22%3A%22Intel+Corporation%22%2C%22product%22%3A%22440BX+Desktop+Reference+Platform%22%2C%22serial_number%22%3A%22None%22%7D%2C%22chassis%22%3A%7B%22asset_tag%22%3A%22No+Asset+Tag%22%2C%22type%22%3A%22Other%22%7D%2C%22manufacturer%22%3A%22VMware%2C+Inc.%22%2C%22product%22%3A%7B%22name%22%3A%22VMware+Virtual+Platform%22%2C%22serial_number%22%3A%22VMware-42+0f+f0+8d+84+ef+bd+f7-24+05+57+11+f2+2d+5d+94%22%2C%22uuid%22%3A%22420FF08D-84EF-BDF7-2405-5711F22D5D94%22%7D%7D%2C%22domain%22%3A%22delivery.puppetlabs.net%22%2C%22facterversion%22%3A%223.3.0%22%2C%22fake_domain%22%3A%22pgtomcat.mycompany.org%22%2C%22filesystems%22%3A%22xfs%22%2C%22fqdn%22%3A%22kqsvnppghtovpjz.delivery.puppetlabs.net%22%2C%22function%22%3A%22app%22%2C%22gid%22%3A%22root%22%2C%22group%22%3A%22pgtomcat%22%2C%22hardwareisa%22%3A%22x86_64%22%2C%22hardwaremodel%22%3A%22x86_64%22%2C%22hostname%22%3A%22kqsvnppghtovpjz%22%2C%22id%22%3A%22root%22%2C%22identity%22%3A%7B%22gid%22%3A0%2C%22group%22%3A%22root%22%2C%22uid%22%3A0%2C%22user%22%3A%22root%22%7D%2C%22interfaces%22%3A%22ens160%2Clo%22%2C%22ip6tables_version%22%3A%221.4.21%22%2C%22ipaddress%22%3A%2210.32.125.250%22%2C%22ipaddress6%22%3A%22fe80%3A%3A250%3A56ff%3Afe8f%3A274e%22%2C%22ipaddress6_ens160%22%3A%22fe80%3A%3A250%3A56ff%3Afe8f%3A274e%22%2C%22ipaddress6_lo%22%3A%22%3A%3A1%22%2C%22ipaddress_ens160%22%3A%2210.32.125.250%22%2C%22ipaddress_lo%22%3A%22127.0.0.1%22%2C%22iptables_version%22%3A%221.4.21%22%2C%22is_pe%22%3Afalse%2C%22is_virtual%22%3Atrue%2C%22java_default_home%22%3A%22%2Fusr%2Flib%2Fjvm%2Fjava-1.7.0-openjdk-1.7.0.111-2.6.7.2.el7_2.x86_64%22%2C%22java_libjvm_path%22%3A%22%2Fusr%2Flib%2Fjvm%2Fjava-1.7.0-openjdk-1.7.0.111-2.6.7.2.el7_2.x86_64%2Fjre%2Flib%2Famd64%2Fserver%22%2C%22java_major_version%22%3A%227%22%2C%22java_patch_level%22%3A%22111%22%2C%22java_version%22%3A%221.7.0_111%22%2C%22jenkins_plugins%22%3A%22%22%2C%22kernel%22%3A%22Linux%22%2C%22kernelmajversion%22%3A%223.10%22%2C%22kernelrelease%22%3A%223.10.0-123.4.2.el7.x86_64%22%2C%22kernelversion%22%3A%223.10.0%22%2C%22load_averages%22%3A%7B%2215m%22%3A0.12%2C%221m%22%3A0.16%2C%225m%22%3A0.12%7D%2C%22lsbdistcodename%22%3A%22Core%22%2C%22lsbdistdescription%22%3A%22CentOS+Linux+release+7.0.1406+%28Core%29%22%2C%22lsbdistid%22%3A%22CentOS%22%2C%22lsbdistrelease%22%3A%227.0.1406%22%2C%22lsbmajdistrelease%22%3A%227%22%2C%22lsbminordistrelease%22%3A%220%22%2C%22lsbrelease%22%3A%22%3Acore-4.1-amd64%3Acore-4.1-noarch%3Acxx-4.1-amd64%3Acxx-4.1-noarch%3Adesktop-4.1-amd64%3Adesktop-4.1-noarch%3Alanguages-4.1-amd64%3Alanguages-4.1-noarch%3Aprinting-4.1-amd64%3Aprinting-4.1-noarch%22%2C%22macaddress%22%3A%2200%3A50%3A56%3A8f%3A27%3A4e%22%2C%22macaddress_ens160%22%3A%2200%3A50%3A56%3A8f%3A27%3A4e%22%2C%22manufacturer%22%3A%22VMware%2C+Inc.%22%2C%22memory%22%3A%7B%22swap%22%3A%7B%22available%22%3A%221.60+GiB%22%2C%22available_bytes%22%3A1719660544%2C%22capacity%22%3A%220%25%22%2C%22total%22%3A%221.60+GiB%22%2C%22total_bytes%22%3A1719660544%2C%22used%22%3A%220+bytes%22%2C%22used_bytes%22%3A0%7D%2C%22system%22%3A%7B%22available%22%3A%223.24+GiB%22%2C%22available_bytes%22%3A3480436736%2C%22capacity%22%3A%2212.49%25%22%2C%22total%22%3A%223.70+GiB%22%2C%22total_bytes%22%3A3976998912%2C%22used%22%3A%22473.56+MiB%22%2C%22used_bytes%22%3A496562176%7D%7D%2C%22memoryfree%22%3A%223.24+GiB%22%2C%22memoryfree_mb%22%3A3319.203125%2C%22memorysize%22%3A%223.70+GiB%22%2C%22memorysize_mb%22%3A3792.76171875%2C%22mountpoints%22%3A%7B%22%2F%22%3A%7B%22available%22%3A%2211.98+GiB%22%2C%22available_bytes%22%3A12860727296%2C%22capacity%22%3A%2213.81%25%22%2C%22device%22%3A%22%2Fdev%2Fmapper%2Fcentos-root%22%2C%22filesystem%22%3A%22xfs%22%2C%22options%22%3A%5B%22rw%22%2C%22seclabel%22%2C%22relatime%22%2C%22attr2%22%2C%22inode64%22%2C%22noquota%22%5D%2C%22size%22%3A%2213.90+GiB%22%2C%22size_bytes%22%3A14921236480%2C%22used%22%3A%221.92+GiB%22%2C%22used_bytes%22%3A2060509184%7D%2C%22%2Fboot%22%3A%7B%22available%22%3A%22371.50+MiB%22%2C%22available_bytes%22%3A389541888%2C%22capacity%22%3A%2225.20%25%22%2C%22device%22%3A%22%2Fdev%2Fsda1%22%2C%22filesystem%22%3A%22xfs%22%2C%22options%22%3A%5B%22rw%22%2C%22seclabel%22%2C%22relatime%22%2C%22attr2%22%2C%22inode64%22%2C%22noquota%22%5D%2C%22size%22%3A%22496.67+MiB%22%2C%22size_bytes%22%3A520794112%2C%22used%22%3A%22125.17+MiB%22%2C%22used_bytes%22%3A131252224%7D%7D%2C%22mtu_ens160%22%3A1500%2C%22mtu_lo%22%3A65536%2C%22netmask%22%3A%22255.255.240.0%22%2C%22netmask6%22%3A%22ffff%3Affff%3Affff%3Affff%3A%3A%22%2C%22netmask6_ens160%22%3A%22ffff%3Affff%3Affff%3Affff%3A%3A%22%2C%22netmask6_lo%22%3A%22ffff%3Affff%3Affff%3Affff%3Affff%3Affff%3Affff%3Affff%22%2C%22netmask_ens160%22%3A%22255.255.240.0%22%2C%22netmask_lo%22%3A%22255.0.0.0%22%2C%22network%22%3A%2210.32.112.0%22%2C%22network6%22%3A%22fe80%3A%3A%22%2C%22network6_ens160%22%3A%22fe80%3A%3A%22%2C%22network6_lo%22%3A%22%3A%3A1%22%2C%22network_ens160%22%3A%2210.32.112.0%22%2C%22network_lo%22%3A%22127.0.0.0%22%2C%22networking%22%3A%7B%22dhcp%22%3A%2210.32.22.10%22%2C%22domain%22%3A%22delivery.puppetlabs.net%22%2C%22fqdn%22%3A%22kqsvnppghtovpjz.delivery.puppetlabs.net%22%2C%22hostname%22%3A%22kqsvnppghtovpjz%22%2C%22interfaces%22%3A%7B%22ens160%22%3A%7B%22bindings%22%3A%5B%7B%22address%22%3A%2210.32.125.250%22%2C%22netmask%22%3A%22255.255.240.0%22%2C%22network%22%3A%2210.32.112.0%22%7D%5D%2C%22bindings6%22%3A%5B%7B%22address%22%3A%22fe80%3A%3A250%3A56ff%3Afe8f%3A274e%22%2C%22netmask%22%3A%22ffff%3Affff%3Affff%3Affff%3A%3A%22%2C%22network%22%3A%22fe80%3A%3A%22%7D%5D%2C%22dhcp%22%3A%2210.32.22.10%22%2C%22ip%22%3A%2210.32.125.250%22%2C%22ip6%22%3A%22fe80%3A%3A250%3A56ff%3Afe8f%3A274e%22%2C%22mac%22%3A%2200%3A50%3A56%3A8f%3A27%3A4e%22%2C%22mtu%22%3A1500%2C%22netmask%22%3A%22255.255.240.0%22%2C%22netmask6%22%3A%22ffff%3Affff%3Affff%3Affff%3A%3A%22%2C%22network%22%3A%2210.32.112.0%22%2C%22network6%22%3A%22fe80%3A%3A%22%7D%2C%22lo%22%3A%7B%22bindings%22%3A%5B%7B%22address%22%3A%22127.0.0.1%22%2C%22netmask%22%3A%22255.0.0.0%22%2C%22network%22%3A%22127.0.0.0%22%7D%5D%2C%22bindings6%22%3A%5B%7B%22address%22%3A%22%3A%3A1%22%2C%22netmask%22%3A%22ffff%3Affff%3Affff%3Affff%3Affff%3Affff%3Affff%3Affff%22%2C%22network%22%3A%22%3A%3A1%22%7D%5D%2C%22ip%22%3A%22127.0.0.1%22%2C%22ip6%22%3A%22%3A%3A1%22%2C%22mtu%22%3A65536%2C%22netmask%22%3A%22255.0.0.0%22%2C%22netmask6%22%3A%22ffff%3Affff%3Affff%3Affff%3Affff%3Affff%3Affff%3Affff%22%2C%22network%22%3A%22127.0.0.0%22%2C%22network6%22%3A%22%3A%3A1%22%7D%7D%2C%22ip%22%3A%2210.32.125.250%22%2C%22ip6%22%3A%22fe80%3A%3A250%3A56ff%3Afe8f%3A274e%22%2C%22mac%22%3A%2200%3A50%3A56%3A8f%3A27%3A4e%22%2C%22mtu%22%3A1500%2C%22netmask%22%3A%22255.255.240.0%22%2C%22netmask6%22%3A%22ffff%3Affff%3Affff%3Affff%3A%3A%22%2C%22network%22%3A%2210.32.112.0%22%2C%22network6%22%3A%22fe80%3A%3A%22%2C%22primary%22%3A%22ens160%22%7D%2C%22operatingsystem%22%3A%22CentOS%22%2C%22operatingsystemmajrelease%22%3A%227%22%2C%22operatingsystemrelease%22%3A%227.0.1406%22%2C%22os%22%3A%7B%22architecture%22%3A%22x86_64%22%2C%22distro%22%3A%7B%22codename%22%3A%22Core%22%2C%22description%22%3A%22CentOS+Linux+release+7.0.1406+%28Core%29%22%2C%22id%22%3A%22CentOS%22%2C%22release%22%3A%7B%22full%22%3A%227.0.1406%22%2C%22major%22%3A%227%22%2C%22minor%22%3A%220%22%7D%2C%22specification%22%3A%22%3Acore-4.1-amd64%3Acore-4.1-noarch%3Acxx-4.1-amd64%3Acxx-4.1-noarch%3Adesktop-4.1-amd64%3Adesktop-4.1-noarch%3Alanguages-4.1-amd64%3Alanguages-4.1-noarch%3Aprinting-4.1-amd64%3Aprinting-4.1-noarch%22%7D%2C%22family%22%3A%22RedHat%22%2C%22hardware%22%3A%22x86_64%22%2C%22name%22%3A%22CentOS%22%2C%22release%22%3A%7B%22full%22%3A%227.0.1406%22%2C%22major%22%3A%227%22%2C%22minor%22%3A%220%22%7D%2C%22selinux%22%3A%7B%22config_mode%22%3A%22enforcing%22%2C%22current_mode%22%3A%22enforcing%22%2C%22enabled%22%3Atrue%2C%22enforced%22%3Atrue%2C%22policy_version%22%3A%2228%22%7D%7D%2C%22osfamily%22%3A%22RedHat%22%2C%22package_provider%22%3A%22yum%22%2C%22partitions%22%3A%7B%22%2Fdev%2Fmapper%2Fcentos-root%22%3A%7B%22filesystem%22%3A%22xfs%22%2C%22mount%22%3A%22%2F%22%2C%22size%22%3A%2213.91+GiB%22%2C%22size_bytes%22%3A14931722240%2C%22uuid%22%3A%223e1d8d4e-2216-4563-8d58-b433c8faf8ce%22%7D%2C%22%2Fdev%2Fmapper%2Fcentos-swap%22%3A%7B%22filesystem%22%3A%22swap%22%2C%22size%22%3A%221.60+GiB%22%2C%22size_bytes%22%3A1719664640%2C%22uuid%22%3A%2286cb57f4-9390-448b-867e-35c3ebcf8238%22%7D%2C%22%2Fdev%2Fsda1%22%3A%7B%22filesystem%22%3A%22xfs%22%2C%22mount%22%3A%22%2Fboot%22%2C%22size%22%3A%22500.00+MiB%22%2C%22size_bytes%22%3A524288000%2C%22uuid%22%3A%224a9725cc-739a-45f5-8ea0-a83885eaeea0%22%7D%2C%22%2Fdev%2Fsda2%22%3A%7B%22filesystem%22%3A%22LVM2_member%22%2C%22size%22%3A%2215.51+GiB%22%2C%22size_bytes%22%3A16654532608%2C%22uuid%22%3A%228JMsR8-Uhdd-tdvv-S7sE-b7Zm-rX7v-d20FVO%22%7D%7D%2C%22path%22%3A%22%2Fusr%2Flocal%2Fsbin%3A%2Fusr%2Flocal%2Fbin%3A%2Fusr%2Fsbin%3A%2Fusr%2Fbin%3A%2Fopt%2Fpuppetlabs%2Fbin%3A%2Froot%2Fbin%3A%2Fsbin%22%2C%22pe_concat_basedir%22%3A%22%2Fopt%2Fpuppetlabs%2Fpuppet%2Fcache%2Fpe_concat%22%2C%22pe_razor_server_version%22%3A%22package+pe-razor-server+is+not+installed%22%2C%22physicalprocessorcount%22%3A2%2C%22platform_symlink_writable%22%3Atrue%2C%22platform_tag%22%3A%22el-7-x86_64%22%2C%22processor0%22%3A%22Intel%28R%29+Xeon%28R%29+CPU+E5-2680+v3+%40+2.50GHz%22%2C%22processor1%22%3A%22Intel%28R%29+Xeon%28R%29+CPU+E5-2680+v3+%40+2.50GHz%22%2C%22processorcount%22%3A2%2C%22processors%22%3A%7B%22count%22%3A2%2C%22isa%22%3A%22x86_64%22%2C%22models%22%3A%5B%22Intel%28R%29+Xeon%28R%29+CPU+E5-2680+v3+%40+2.50GHz%22%2C%22Intel%28R%29+Xeon%28R%29+CPU+E5-2680+v3+%40+2.50GHz%22%5D%2C%22physicalcount%22%3A2%7D%2C%22productname%22%3A%22VMware+Virtual+Platform%22%2C%22puppet_files_dir_present%22%3Afalse%2C%22puppet_vardir%22%3A%22%2Fopt%2Fpuppetlabs%2Fpuppet%2Fcache%22%2C%22puppetversion%22%3A%224.5.3%22%2C%22root_home%22%3A%22%2Froot%22%2C%22rsyslog_version%22%3A%227.4.7%22%2C%22ruby%22%3A%7B%22platform%22%3A%22x86_64-linux%22%2C%22sitedir%22%3A%22%2Fopt%2Fpuppetlabs%2Fpuppet%2Flib%2Fruby%2Fsite_ruby%2F2.1.0%22%2C%22version%22%3A%222.1.9%22%7D%2C%22rubyplatform%22%3A%22x86_64-linux%22%2C%22rubysitedir%22%3A%22%2Fopt%2Fpuppetlabs%2Fpuppet%2Flib%2Fruby%2Fsite_ruby%2F2.1.0%22%2C%22rubyversion%22%3A%222.1.9%22%2C%22selinux%22%3Atrue%2C%22selinux_config_mode%22%3A%22enforcing%22%2C%22selinux_current_mode%22%3A%22enforcing%22%2C%22selinux_enforced%22%3Atrue%2C%22selinux_policyversion%22%3A%2228%22%2C%22serialnumber%22%3A%22VMware-42+0f+f0+8d+84+ef+bd+f7-24+05+57+11+f2+2d+5d+94%22%2C%22service_provider%22%3A%22systemd%22%2C%22ssh%22%3A%7B%22ecdsa%22%3A%7B%22fingerprints%22%3A%7B%22sha1%22%3A%22SSHFP+3+1+d39b22b2e94886804feff4df669da23cdb358b58%22%2C%22sha256%22%3A%22SSHFP+3+2+94a8328bce249921a53ffd36cb1d4b7b5a723949abebd554d7d0507e8c83e04c%22%7D%2C%22key%22%3A%22AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBLqjIT44wYmXSU%2Bvc5zsUUxf00XTllP22tjIwChv3sW7uNhtqLXc1bagOqpRLctiBi64bo%2F%2BCPvBJxUT3%2B5RWOc%3D%22%7D%2C%22ed25519%22%3A%7B%22fingerprints%22%3A%7B%22sha1%22%3A%22SSHFP+4+1+382e1961cecdbb6264fb12cf6a4e27f478531ad3%22%2C%22sha256%22%3A%22SSHFP+4+2+33686244acacd57a7f70e31da57d9b052d19f6c64ccf38b6c6f9a40062ad0786%22%7D%2C%22key%22%3A%22AAAAC3NzaC1lZDI1NTE5AAAAIIZ4CR8r3KmDDdtdT2j47rJV0UIYQUYodH4AbdweyOsd%22%7D%2C%22rsa%22%3A%7B%22fingerprints%22%3A%7B%22sha1%22%3A%22SSHFP+1+1+e0f23ba5ff40fa9bc18c4fbb820c4f6afdef335d%22%2C%22sha256%22%3A%22SSHFP+1+2+9333a82d26cfb2e1e89368e8061eef1c48a87da677395cf02f0ff1b72d862008%22%7D%2C%22key%22%3A%22AAAAB3NzaC1yc2EAAAADAQABAAABAQDBKcjgii7T6UEVEUZGYsI52NZmzbJABGJHqnR%2BxeAlCz0H939xVgQHK7%2FnCq3joxmVLwTKd7DTCqMn9x1Q7MJ9ERJWIUCgwPNdS4YDfq52nddk%2BFNtAfhiWsnAjS1MNGUDUcAxakOjvcWp%2FpPG6cGIq8gnnMdY3Nemlq3i3b5zruvv1z77Mq2rPthfibEP5kI3Hwt%2FrrcyIuUWiE5oGh0CBw4hLdB3BZMu0OzPcbKW%2Fn8rM0krYB6t1aC5AJy%2FdIJrFVyjbvI6XFBfYm2eqMM0eZGaerpAt%2Bd%2B%2FcmiFJF2PLAb5HxkeTpbm%2BgaiqfkI8UDsjc77wGvnvC3M3nz%2F6uL%22%7D%7D%2C%22sshecdsakey%22%3A%22AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBLqjIT44wYmXSU%2Bvc5zsUUxf00XTllP22tjIwChv3sW7uNhtqLXc1bagOqpRLctiBi64bo%2F%2BCPvBJxUT3%2B5RWOc%3D%22%2C%22sshed25519key%22%3A%22AAAAC3NzaC1lZDI1NTE5AAAAIIZ4CR8r3KmDDdtdT2j47rJV0UIYQUYodH4AbdweyOsd%22%2C%22sshfp_ecdsa%22%3A%22SSHFP+3+1+d39b22b2e94886804feff4df669da23cdb358b58%5CnSSHFP+3+2+94a8328bce249921a53ffd36cb1d4b7b5a723949abebd554d7d0507e8c83e04c%22%2C%22sshfp_ed25519%22%3A%22SSHFP+4+1+382e1961cecdbb6264fb12cf6a4e27f478531ad3%5CnSSHFP+4+2+33686244acacd57a7f70e31da57d9b052d19f6c64ccf38b6c6f9a40062ad0786%22%2C%22sshfp_rsa%22%3A%22SSHFP+1+1+e0f23ba5ff40fa9bc18c4fbb820c4f6afdef335d%5CnSSHFP+1+2+9333a82d26cfb2e1e89368e8061eef1c48a87da677395cf02f0ff1b72d862008%22%2C%22sshrsakey%22%3A%22AAAAB3NzaC1yc2EAAAADAQABAAABAQDBKcjgii7T6UEVEUZGYsI52NZmzbJABGJHqnR%2BxeAlCz0H939xVgQHK7%2FnCq3joxmVLwTKd7DTCqMn9x1Q7MJ9ERJWIUCgwPNdS4YDfq52nddk%2BFNtAfhiWsnAjS1MNGUDUcAxakOjvcWp%2FpPG6cGIq8gnnMdY3Nemlq3i3b5zruvv1z77Mq2rPthfibEP5kI3Hwt%2FrrcyIuUWiE5oGh0CBw4hLdB3BZMu0OzPcbKW%2Fn8rM0krYB6t1aC5AJy%2FdIJrFVyjbvI6XFBfYm2eqMM0eZGaerpAt%2Bd%2B%2FcmiFJF2PLAb5HxkeTpbm%2BgaiqfkI8UDsjc77wGvnvC3M3nz%2F6uL%22%2C%22stage%22%3A%22prod%22%2C%22staging_http_get%22%3A%22curl%22%2C%22swapfree%22%3A%221.60+GiB%22%2C%22swapfree_mb%22%3A1639.99609375%2C%22swapsize%22%3A%221.60+GiB%22%2C%22swapsize_mb%22%3A1639.99609375%2C%22system_uptime%22%3A%7B%22days%22%3A0%2C%22hours%22%3A3%2C%22seconds%22%3A13924%2C%22uptime%22%3A%223%3A52+hours%22%7D%2C%22timezone%22%3A%22PDT%22%2C%22uptime%22%3A%223%3A52+hours%22%2C%22uptime_days%22%3A0%2C%22uptime_hours%22%3A3%2C%22uptime_seconds%22%3A13924%2C%22uuid%22%3A%22420FF08D-84EF-BDF7-2405-5711F22D5D94%22%2C%22virtual%22%3A%22vmware%22%2C%22whereami%22%3A%22portland%22%2C%22clientcert%22%3A%22${node}%22%2C%22clientversion%22%3A%224.5.3%22%2C%22clientnoop%22%3Afalse%7D%2C%22timestamp%22%3A%222016-08-09T08%3A51%3A24.702984497-07%3A00%22%2C%22expiration%22%3A%222125-08-09T09%3A21%3A24.703274729-07%3A00%22%7D")
			.formParam("transaction_uuid", "7e540c32-0b79-467f-90d1-cc6330617b50")
			.formParam("static_catalog", "true")
			.formParam("checksum_type", "md5.sha256")
			.formParam("fail_on_404", "true"))
		.pause(1)
		.exec(http("filemeta mco plugins")
			.get("/puppet/v3/file_metadatas/modules/puppet_enterprise/mcollective/plugins?environment=production&links=manage&recurse=true&source_permissions=ignore&checksum_type=md5")
			.headers(headers_0))
		.pause(3)
		.exec((session:Session) => {
			session.set("reportTimestamp",
				LocalDateTime.now.toString(ISODateTimeFormat.dateTime()))
		})
		.exec((session:Session) => {
			session.set("transactionUuid",
				UUID.randomUUID().toString())
		})
		.exec(http("report")
			.put("/puppet/v3/report/${node}?environment=production&")
			.headers(headers_5)
			.body(reportBody))

// setUp(scn.inject(atOnceUsers(1))).protocols(httpProtocol)
}
